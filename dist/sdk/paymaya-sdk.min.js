/*! global ActiveXObject: false */
var PayMaya=PayMaya||{};PayMaya.Payments=function(a){this.pfKey=a},PayMaya.Payments.prototype.createPaymentToken=function(a,b,c,d,e,f,g){this.paymentForm=a;var h={cardNumber:b.value,cardCvc:c.value,cardExpiryMonth:d.value,cardExpiryYear:e.value,success:f,failure:g};return PayMaya.Payments.onFormProcessing(this.pfKey,this.paymentForm,h)},PayMaya.Payments.onFormProcessing=function(a,b,c){var d,e,f,g,h;d={card:{number:c.cardNumber,cvc:c.cardCvc,expMonth:c.cardExpiryMonth,expYear:c.cardExpiryYear}},f=PayMaya.Payments.getXMLHttpRequest(),null!==f?(f.open("POST","http://private-anon-5c87df497-paymayapaymentsapi.apiary-mock.com/payment-tokens"),f.setRequestHeader("Content-Type","application/json"),g=btoa(a),f.setRequestHeader("Authorization","Basic "+g),f.onreadystatechange=function(){4===f.readyState&&(200===f.status?(e=JSON.parse(f.responseText),e.hasOwnProperty("id")&&""!==e.id&&"created"===e.state?c.success(e):e.hasOwnProperty("id")&&""!==e.id&&"used"===e.state&&(h='State has been change from "created" to "used"',c.failure(h)),e.hasOwnProperty("category")&&"payments-error"===e.category&&"5001"===e.code&&c.failure(e.message)):(h="Error",c.failure(h)))},f.send(JSON.stringify(d))):(h="AJAX (XMLHTTP) not supported.",c.failure(h))},PayMaya.Payments.getXMLHttpRequest=function(){var a=null;if(window.XMLHttpRequest)
// Chome, Firefox, Opera 8.0+, Safari
a=new window.XMLHttpRequest;else try{
// Internet Explorer
a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}return a};